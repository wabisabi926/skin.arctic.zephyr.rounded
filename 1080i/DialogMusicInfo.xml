<?xml version="1.0" encoding="UTF-8"?>
<window id="2001">
    <defaultcontrol always="false">9000</defaultcontrol>

    <onload>ClearProperty(TMDbHelper.WidgetContainer)</onload>
    <onload>Skin.Reset(TMDbHelper.ForceWidgetContainer)</onload>

    <!-- <onload condition="String.IsEqual(ListItem.DBType,album) + String.IsEqual(ListItem.DBType,song) + !String.IsEmpty(ListItem.Artist)">RunPlugin("plugin://script.skinvariables/?info=get_encoded_string&amp;unencoded_paths=true&amp;window_id=Home&amp;window_prop=Encoded.ListItem.Artist&amp;&amp;$INFO[ListItem.Artist]")</onload> -->

    <onload condition="!String.IsEmpty(ListItem.AlbumArtist)">RunPlugin("plugin://script.skinvariables/?info=get_encoded_string&amp;unencoded_paths=true&amp;window_id=Home&amp;window_prop=Encoded.ListItem.Artist&amp;&amp;$INFO[ListItem.AlbumArtist]")</onload>

    <onload>SetFocus(50,0,absolute)</onload>
    <onload>SetFocus(9501,0,absolute)</onload>
    <onload>SetFocus(9502,0,absolute)</onload>
    <onload>SetFocus(9508,0,absolute)</onload>
    <onload>SetFocus(9511,0,absolute)</onload>

    <onload condition="!Control.IsVisible(9002)">SetFocus(12)</onload>
    <onload condition="Control.IsVisible(9002)">SetFocus(9002)</onload>

    <onload>ClearProperty(content)</onload>
    <onload>ClearProperty(ShowDisc)</onload>
    <onload>ClearProperty(musiccontent,Home)</onload>
    <onload>ClearProperty(view_extended,Home)</onload>
    <onload>ClearProperty(focus_tracklist,Home)</onload>
    <onload>ClearProperty(last_focus,Home)</onload>

    <onload condition="String.IsEqual(ListItem.DBType,artist)">SetFocus(9002)</onload>
    <onload condition="!String.IsEqual(ListItem.DBType,artist) + Control.IsVisible(9001)">SetFocus(9001)</onload>
    <onload condition="!String.IsEqual(ListItem.DBType,artist) + Player.HasMedia + Control.IsVisible(9201)">SetFocus(9201)</onload>

    <!-- AUTOPLAY TRAILER -->

    <onload condition="Skin.HasSetting(home.views.flix.autoplay.trailer) + Skin.HasSetting(trailer.stop.on.dialogvideoinfo) + $EXP[Trailer_Is_Playing] + Player.Playing">Stop</onload>
    <onload condition="Skin.HasSetting(home.views.flix.autoplay.trailer) + Skin.HasSetting(trailer.pause.on.dialogvideoinfo) + $EXP[Trailer_Is_Playing] + Player.Playing">Pause</onload>

    <!-- YOUTUBE -->

    <onload>ClearProperty(SetYoutubeSearch,Home)</onload>

    <onunload>ClearProperty(SetUserRating,Home)</onunload>
    <onunload>ClearProperty(ShowDisc)</onunload>
    <onunload>ClearProperty(view_extended,Home)</onunload>

    <onunload condition="!String.IsEmpty(Window(Home).Property(backtoslidehome_2011))">SetFocus(2011)</onunload>
    <onunload condition="!Window.IsVisible(MusicVisualisation.xml) + !String.IsEmpty(Window(Home).Property(shownowplayinginfo))">SetFocus(399)</onunload>

    <onunload condition="Player.PauseEnabled + Window.IsVisible(MusicVisualisation.xml) + Window.IsVisible(MusicOSD.xml)">SetFocus(14)</onunload>
    <onunload condition="!Player.PauseEnabled + Window.IsVisible(MusicVisualisation.xml) + Window.IsVisible(MusicOSD.xml) ">SetFocus(15)</onunload>

    <onunload condition="!String.IsEmpty(Window(Home).Property(shownowplayinginfo))">ClearProperty(shownowplayinginfo,Home)</onunload>

    <!-- AUTOPLAY TRAILER -->

    <onunload condition="Skin.HasSetting(home.views.flix.autoplay.trailer) + Skin.HasSetting(trailer.pause.on.dialogvideoinfo) + $EXP[Trailer_Is_Playing] + Player.Paused">Pause</onunload>

    <!-- YOUTUBE -->

    <onunload>ClearProperty(SetYoutubeSearch,Home)</onunload>

    <controls>
        <include condition="!Skin.HasSetting(show.global.visualisation.background.video)">Hidden_Video_Window</include>
        <include>Background_Global</include>
        <include>Dialog_Music_Info</include>
        <include condition="!Skin.HasSetting(hide.furniture.nowplaying.views)">Furniture_Header_NowPlaying</include>
        <include content="Def_Dialog_Info_Overlay">
            <param name="headerinfo" value="$INFO[ListItem.Artist]" />
            <param name="plotinfo" value="$VAR[Label_Overlay_Info_Music_Plot]$VAR[Label_Overlay_Info_Music_TagLine]$VAR[Label_Overlay_Info_Music_Album_Tracks]" />
        </include>
    </controls>
</window>

<?xml version="1.0" encoding="UTF-8"?>
<window id="2003">
    <defaultcontrol always="true">9000</defaultcontrol>
    <menucontrol>9000</menucontrol>

    <onload>ClearProperty(TMDbHelper.WidgetContainer)</onload>
    <onload>Skin.Reset(TMDbHelper.ForceWidgetContainer)</onload>

    <onload condition="Skin.HasSetting(lock.video.only.local)">Skin.SetBool(filter.video.only.local)</onload>

    <!-- SKINVARIABLES - DBID LOOKUP -->

    <!-- <onload condition="Window.IsVisible(1190) + !String.IsEmpty(ListItem.DBID)">plugin://script.skinvariables/?info=get_dbitem_movie_details&amp;dbid=$INFO[ListItem.DBID]</onload> -->

    <include>Def_Cleanup_On_Load</include>

    <onload>ClearProperty(view_extended,Home)</onload>
    <onload>ClearProperty(ShowDisc)</onload>
    <onload>ClearProperty(content)</onload>
    <onload>ClearProperty(down)</onload>

    <onload>ClearProperty(origin_tmdb_type,Home)</onload>
    <onload>ClearProperty(origin_dbid,Home)</onload>
    <onload>ClearProperty(origin_tmdb_id,Home)</onload>

    <onload condition="String.IsEmpty(ListItem.DBID) + String.IsEmpty(ListItem.TvShowDBID)">SetProperty(origin_tmdb_id,$VAR[Path_InfoParams_TMDbID],Home)</onload>
    <onload condition="!String.IsEmpty(ListItem.DBID) | !String.IsEmpty(ListItem.TvShowDBID)">SetProperty(origin_dbid,$VAR[Path_InfoParams_DBID],Home)</onload>
    <onload>SetProperty(origin_tmdb_type,$VAR[Path_InfoParams_TMDbType],Home)</onload>

    <onload>ClearProperty(filemanager_back_video_info_type,Home)</onload>
    <onload>ClearProperty(filemanager_back_video_info_bdid,Home)</onload>

    <!-- PERSON -->

    <onload condition="!Control.IsVisible(8) + Control.IsVisible(90122) + [System.AddonIsEnabled(plugin.video.themoviedb.helper) + Skin.HasSetting(enabled.tmdb.helper.service)]">SetFocus(90122)</onload>
    <onload condition="!Control.IsVisible(8) + Control.IsVisible(90123)+ ![System.AddonIsEnabled(plugin.video.themoviedb.helper) + Skin.HasSetting(enabled.tmdb.helper.service)]">SetFocus(90123)</onload>
    <onload condition="!Control.IsVisible(8) + Control.IsVisible(9060)">SetFocus(9060)</onload>

    <!-- MOVIE - BACK FULL SCREEN IF PLAYER HAS VIDEO -->

    <onload condition="!Control.IsVisible(8) + Control.IsVisible(9201)">SetFocus(9201)</onload>

    <!-- TVSHOW - BUTTON PARCOURIR -->

    <onload condition="!Control.IsVisible(8) + !Control.IsVisible(9201) + Control.IsVisible(9078)">SetFocus(9078)</onload>

    <!-- MOVIE - PLAY -->

    <onload condition="Control.IsVisible(8008)">SetFocus(8008)</onload>

    <onload condition="Skin.HasSetting(osd.open.auto.pause) + Player.HasMedia + Player.HasVideo + !Player.Paused + !String.IsEmpty(VideoPlayer.DBID)">PlayerControl(Play)</onload>
    <onload condition="Skin.HasSetting(osd.open.auto.pause) + Player.HasMedia + Player.HasVideo + String.IsEmpty(Window(Home).Property(OSDVideo_DIALOG_VIDEO_INFO)) + !String.IsEmpty(VideoPlayer.DBID)">SetProperty(OSDVideo_DIALOG_VIDEO_INFO,1,Home)</onload>

    <!-- AUTOPLAY TRAILER -->

    <onload condition="Skin.HasSetting(home.views.flix.autoplay.trailer) + Skin.HasSetting(trailer.stop.on.dialogvideoinfo) + $EXP[Trailer_Is_Playing] + Player.Playing">Stop</onload>
    <onload condition="Skin.HasSetting(home.views.flix.autoplay.trailer) + Skin.HasSetting(trailer.pause.on.dialogvideoinfo) + $EXP[Trailer_Is_Playing] + Player.Playing">Pause</onload>

    <include>Def_Cleanup_On_UnLoad</include>

    <onunload>ClearProperty(ListVideoForCast,Home)</onunload>
    <onunload>ClearProperty(ListVideoForCastIcon,Home)</onunload>
    <onunload>ClearProperty(SetUserRating,Home)</onunload>

    <onunload>ClearProperty(view_extended,Home)</onunload>
    <onunload>ClearProperty(ShowDisc)</onunload>
    <onunload>ClearProperty(dontslide,Home)</onunload>
    <onunload>ClearProperty(isoninfo_actor,Home)</onunload>
    <onunload condition="String.IsEqual(ListItem.Property(tmdb_type),person)">ClearProperty(isoninfo_director,Home)</onunload>

    <onunload>ClearProperty(TrailerFullscreenIsPlaying,Home)</onunload>
    <onunload>ClearProperty(VideoYoutubeIsPlaying,Home)</onunload>
    <onunload>ClearProperty(show_mini_osd,Home)</onunload>

    <onunload condition="!Player.HasMedia | String.IsEmpty(VideoPlayer.DBID)">ClearProperty(OSDVideo_DIALOG_VIDEO_INFO,Home)</onunload>

    <!-- AUTOPLAY TRAILER -->

    <onunload condition="Skin.HasSetting(home.views.flix.autoplay.trailer) + Skin.HasSetting(trailer.pause.on.dialogvideoinfo) + $EXP[Trailer_Is_Playing] + Player.Paused">Pause</onunload>

    <onunload condition="!String.IsEmpty(Window(Home).Property(backtoslidehome_2011))">SetFocus(2011)</onunload>
    <onunload condition="!String.IsEmpty(Window(Home).Property(shownowplayinginfo))">SetFocus(4000)</onunload>
    <onunload condition="!String.IsEmpty(Window(Home).Property(shownowplayinginfo))">ClearProperty(shownowplayinginfo,Home)</onunload>

    <controls>
        <include condition="!Skin.HasSetting(show.global.visualisation.background.video)">Hidden_Video_Window</include>
        <include>Background_Global</include>
        <include condition="!Skin.HasSetting(hide.furniture.nowplaying.views)">Furniture_Header_NowPlaying</include>

        <include>Dialog_Video_Info</include>
        <include condition="!Skin.HasSetting(disable.all.hidden.list)">Hidden_List_Set_Count</include>
        <include content="Def_Dialog_Info_Overlay">
            <param name="headerinfo" value="$INFO[ListItem.Title]" />
            <param name="plotinfo" value="$VAR[Label_Tagline,[B],[/B][CR][CR]]$VAR[Label_Plot_Box_Video_Music]" />
        </include>
        <include condition="Skin.HasSetting(DebugInfo.widget)">Furniture_DebugInfo_Item</include>
    </controls>
</window>

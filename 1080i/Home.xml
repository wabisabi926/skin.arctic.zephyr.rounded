<?xml version="1.0" encoding="UTF-8"?>
<window id="0">

    <defaultcontrol always="false">300</defaultcontrol>
    <include condition="Skin.HasSetting(enabled.tmdb.helper.blur)">Action_Blur_Onload</include>

    <onload>RunScript(script.skinshortcuts,type=buildxml&amp;mainmenuID=300&amp;group=mainmenu|x1111|x1112|x1113|x1114|x1115|x1116|x1117|x1118|x1119|powermenu&amp;levels=10)</onload>
    <onload>RunScript(script.skinvariables,action=buildviews)</onload>

    <onload condition="!String.IsEqual(Window(Home).Property(ClearArtAnimation),Container(300).ListItem.Label)">SetProperty(ClearArtAnimation,$INFO[Container(300).ListItem.Label],Home)</onload>

    <!-- EXTENDED NOW PLAYING -->

    <onload condition="Player.PauseEnabled + $EXP[Extended_Now_Playing_Is_Visible]">SetFocus(14)</onload>
    <onload condition="!Player.PauseEnabled + $EXP[Extended_Now_Playing_Is_Visible]">SetFocus(15)</onload>

    <onload condition="!String.IsEmpty(Window(Home).Property(SetBackMenu300AfterSubMenu302))">SetFocus(300)</onload>
    <onload condition="!String.IsEmpty(Window(Home).Property(SetBackMenu300AfterSubMenu302))">ClearProperty(SetBackMenu300AfterSubMenu302,Home)</onload>
    <onload condition="!System.AddonIsEnabled(plugin.video.themoviedb.helper)">Skin.SetBool(filter.video.only.local)</onload>

    <!-- START TMDBH SERVICE -->

    <onload condition="Skin.HasSetting(enabled.tmdb.helper.service)">Skin.SetBool(TMDbHelper.Service)</onload>
    <onload condition="Skin.HasSetting(enabled.tmdb.helper.crop)">Skin.SetBool(TMDbHelper.EnableCrop)</onload>
    <onload condition="Skin.HasSetting(enabled.tmdb.helper.blur)">Skin.SetBool(TMDbHelper.EnableBlur)</onload>
    <onload condition="[Skin.HasSetting(enabled.tmdb.helper.crop) | Skin.HasSetting(enabled.tmdb.helper.blur)]">Skin.Reset(TMDbHelper.DisableArtwork)</onload>

    <!-- STOP TMDBH SERVICE -->

    <onload condition="!Skin.HasSetting(enabled.tmdb.helper.service)">Skin.Reset(TMDbHelper.Service)</onload>
    <onload condition="!Skin.HasSetting(enabled.tmdb.helper.crop)">Skin.Reset(TMDbHelper.EnableCrop)</onload>
    <onload condition="!Skin.HasSetting(enabled.tmdb.helper.blur)">Skin.Reset(TMDbHelper.EnableBlur)</onload>
    <onload condition="!Skin.HasSetting(enabled.tmdb.helper.crop) + !Skin.HasSetting(enabled.tmdb.helper.blur)">Skin.SetBool(TMDbHelper.DisableArtwork)</onload>

    <onload>Skin.Reset(TMDbHelper.DirectCallAuto)</onload>
    <!-- <onload>Skin.SetBool(TMDbHelper.DirectCallAuto)</onload> -->

    <onload>Skin.SetString(Wikipedia.Format.Link,[COLOR=$VAR[Color_Highlight]]{}[/COLOR])</onload>

    <onload condition="String.IsEmpty(TMDbHelper.WidgetContainer)">$VAR[Set_TMDB_Helper_Widget_Container_left_up]</onload>

    <!-- AUTO SLIDE NOWPLAYING -->

    <onload condition="$EXP[Has_Home_Menu_Auto_Slide_Out_Animation]">CancelAlarm(slide_out,true)</onload>
    <onunload condition="$EXP[Has_Home_Menu_Auto_Slide_Out_Animation]">CancelAlarm(slide_out,true)</onunload>
    <onunload>ClearProperty(TMDbHelper.WidgetContainer)</onunload>

    <onunload condition="Skin.HasSetting(home.netflix.autoplay.trailer)">ClearProperty(listitem.trailer,Home)</onunload>

    <onunload>ClearProperty(MenuSelect,Home)</onunload>
    <onunload>ClearProperty(AnimationDirection,Home)</onunload>
    <onunload>ClearProperty(ClearArtAnimation,Home)</onunload>

    <controls>
        <include condition="!Skin.HasSetting(show.global.visualisation.background.video)">Hidden_Video_Window</include>

        <include>Background_Global</include>
        <include>Home_Next_Recording</include>

        <!-- <include condition="Skin.HasSetting(home.style.horizontal.clean)">Background_Home_Clean</include> -->

        <!-- HIDDEN LISTS -->

        <include condition="$EXP[Has_Home_Menu_Auto_Slide_Out_Animation]">skinshortcuts-template-Button_id_2011_Slide_Out_Home_Menu</include>

        <include>Hidden_List_Home_Artist_Album_Count</include>
        <include>Hidden_List_Home_Album_Song_Count</include>
        <include>Hidden_List_Home_Channel_Count</include>

        <include>Hidden_Set_Count</include>
        <include>Hidden_Actor_Info</include>
        <include>Set_Artist_Search</include>
        <include>Set_Album_Search</include>
        <include>Hidden_Button_Search</include>

        <!-- OTHER MENUS AND WIDGETS -->

        <include condition="$EXP[Home_Is_Vertical]">Home_Vertical_Menu_Widgets</include>

        <!-- FADE OUT ON HOME_IS_HORIZONTAL -->

        <include condition="$EXP[Home_Is_Horizontal]">Animation_Home_Is_Horizontal</include>
        <include condition="$EXP[Home_Is_Horizontal]">Home_Horizontal_Widget_Info_Widgets</include>
        <include condition="!Skin.HasSetting(home.vertical)">Home_Header</include>

        <include condition="$EXP[Home_Is_Horizontal]">Animation_Fade_Home_Row</include>
        <include condition="!Skin.HasSetting(home.vertical)">Home_Horizontal_Row</include>

        <!-- HORIZONTAL - SUBMENUS -->

        <include condition="!Skin.HasSetting(home.vertical) + Skin.HasSetting(home.show.sub.menu.horizontal) + !Skin.HasSetting(home.show.menu.icons)">Home_Horizontal_Sub_Menu_Horizontal</include>
        <include condition="!Skin.HasSetting(home.vertical) + [!Skin.HasSetting(home.show.sub.menu.horizontal) | Skin.HasSetting(home.show.menu.icons)]">Home_Horizontal_Sub_Menu_Vertical</include>

        <!-- SHOWN LABEL MENU / SUBMENU - ONLY ICON -->

        <include condition="$EXP[Exp_Show_Label_Item_Menu]">Home_Vertical_Menu_Icon_Label</include>

        <!-- VERTICAL - FLAGS INDICATORS  -->

        <include condition="$EXP[Home_Is_Vertical] + !Skin.HasSetting(hide.furniture.flags.vertical.widgets)">Home_Vertical_Widget_Flags</include>

        <!-- TRAILER FULL SCREEN -->
        
        <include>Def_Dialog_Info_Video_Fullscreen</include>

        <!-- DEBUG INFO -->

        <include condition="Skin.HasSetting(DebugInfo.widget)">Furniture_DebugInfo_Item</include>
    </controls>
</window>

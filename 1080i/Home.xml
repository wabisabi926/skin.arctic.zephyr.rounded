<?xml version="1.0" encoding="UTF-8"?>
<window>
    <!-- <defaultcontrol always="false">399</defaultcontrol> -->
    <defaultcontrol>399</defaultcontrol>

    <!-- ================================== -->
    <!--                ON LOAD             -->
    <!-- ================================== -->

    <include condition="Skin.HasSetting(enabled.tmdb.helper.blur)">Action_Blur_Onload</include>

    <onload>RunScript(script.skinshortcuts,type=buildxml&amp;mainmenuID=300&amp;group=mainmenu|x1111|x1112|x1113|x1114|x1115|x1116|x1117|x1118|x1119|powermenu&amp;levels=10)</onload>
    <onload>RunScript(script.skinvariables,action=buildviews)</onload>

    <!-- SET COLOR LINK WIKIPEDIA -->

    <onload>Skin.SetString(Wikipedia.Format.Link,[COLOR=$VAR[Color_Wikipedia_Format_Link]]{}[/COLOR])</onload>

    <!-- INITIALISATION -->

    <onload>ClearProperty(ShowMenuLabel,Home)</onload>
    <onload>ClearProperty(Hide_On_Reload_Dialog_Info,Home)</onload>

    <onload condition="!System.AddonIsEnabled(plugin.video.themoviedb.helper)">Skin.SetBool(filter.video.only.local)</onload>

    <!-- FOCUS - EXTENDED NOW PLAYING -->

    <onload condition="Player.PauseEnabled + $EXP[Extended_Now_Playing_Is_Visible]">SetFocus(14)</onload>
    <onload condition="!Player.PauseEnabled + $EXP[Extended_Now_Playing_Is_Visible]">SetFocus(15)</onload>

    <!-- FOCUS - MAIN MENU - 399 -->

    <onload condition="!String.IsEmpty(Window(Home).Property(Set_Back_Menu_300_After_SubMenu_302))">SetFocus(399)</onload>
    <onload condition="!String.IsEmpty(Window(Home).Property(Set_Back_Menu_300_After_SubMenu_302))">ClearProperty(Set_Back_Menu_300_After_SubMenu_302,Home)</onload>

    <!-- FOCUS - LAST WIDGET FOCUS -->

    <onload condition="!String.IsEmpty(Window(Home).Property(HomeLastWidgetFocus))">SetFocus($INFO[Window(Home).Property(HomeLastWidgetFocus)])</onload>
    <onload condition="String.IsEmpty(Window(Home).Property(HomeLastWidgetFocus))">SetFocus(399)</onload>

    <!-- START TMDBH SERVICE -->

    <onload condition="Skin.HasSetting(enabled.tmdb.helper.service)">Skin.SetBool(TMDbHelper.Service)</onload>
    <onload condition="Skin.HasSetting(disable.tmdb.helper.cacheOnly)">Skin.SetBool(TMDbHelper.DisableDefaultCacheOnly)</onload>
    <onload condition="Skin.HasSetting(enabled.tmdb.helper.crop)">Skin.SetBool(TMDbHelper.EnableCrop)</onload>
    <onload condition="Skin.HasSetting(enabled.tmdb.helper.blur)">Skin.SetBool(TMDbHelper.EnableBlur)</onload>
    <onload condition="[Skin.HasSetting(enabled.tmdb.helper.crop) | Skin.HasSetting(enabled.tmdb.helper.blur)]">Skin.Reset(TMDbHelper.DisableArtwork)</onload>

    <!-- STOP TMDBH SERVICE -->

    <onload condition="!Skin.HasSetting(enabled.tmdb.helper.service)">Skin.Reset(TMDbHelper.Service)</onload>
    <onload condition="!Skin.HasSetting(disable.tmdb.helper.cacheOnly)">Skin.Reset(TMDbHelper.DisableDefaultCacheOnly)</onload>
    <onload condition="!Skin.HasSetting(enabled.tmdb.helper.crop)">Skin.Reset(TMDbHelper.EnableCrop)</onload>
    <onload condition="!Skin.HasSetting(enabled.tmdb.helper.blur)">Skin.Reset(TMDbHelper.EnableBlur)</onload>
    <onload condition="!Skin.HasSetting(enabled.tmdb.helper.crop) + !Skin.HasSetting(enabled.tmdb.helper.blur)">Skin.SetBool(TMDbHelper.DisableArtwork)</onload>

    <!-- <onload>Skin.Reset(TMDbHelper.DirectCallAuto)</onload> -->
    <!-- <onload>Skin.SetBool(TMDbHelper.DirectCallAuto)</onload> -->

    <!-- AUTO SLIDE OUT MAIN MENU -->

    <onload condition="$EXP[Has_Home_Menu_Auto_Slide_Out_Animation]">CancelAlarm(slide_out_setfocus_2011,true)</onload>

    <!-- ================================== -->
    <!--             ON UNLOAD             -->
    <!-- ================================== -->

    <!-- AUTO SLIDE OUT MAIN MENU -->

    <onunload condition="$EXP[Has_Home_Menu_Auto_Slide_Out_Animation]">CancelAlarm(slide_out_setfocus_2011,true)</onunload>

    <!-- RESET TMDB WIDGET CONTAINER -->

    <onunload>ClearProperty(TMDbHelper.WidgetContainer,Home)</onunload>

    <!-- RESET AUTO TRAILER -->

    <onunload condition="Skin.HasSetting(home.views.flix.autoplay.trailer)">ClearProperty(ListItem_Trailer_Path,Home)</onunload>

    <!-- MAIN MENU -->

    <onunload>ClearProperty(MenuSelect,Home)</onunload>
    <onunload>ClearProperty(AnimationDirection,Home)</onunload>

    <controls>
        <include>Background_Global</include>
        <include>Home_Next_Recording</include>

        <!-- <include condition="Skin.HasSetting(home.style.horizontal.clean)">Background_Home_Clean</include> -->

        <!-- ================================== -->
        <!--            HIDDEN LISTS            -->
        <!-- ================================== -->

        <include condition="!Skin.HasSetting(disable.all.hidden.list)">Hidden_List_Home_Artist_Album_Count</include>
        <include condition="!Skin.HasSetting(disable.all.hidden.list)">Hidden_List_Home_Album_Song_Count</include>
        <include condition="!Skin.HasSetting(disable.all.hidden.list)">Hidden_List_Home_Album_Item_Name_In_Folder</include>
        <include condition="!Skin.HasSetting(disable.all.hidden.list)">Hidden_List_Home_Set_Count</include>

        <!-- <include>Hidden_Video_Actor_Info</include> -->

        <!-- ================    BRAKE WIDGETS YOUTUBE     ================ -->
        <!-- <include condition="!Skin.HasSetting(disable.all.hidden.list)">Hidden_List_Home_Channel_Count</include> -->
        <!-- ================    BRAKE WIDGETS YOUTUBE     ================ -->

        <!-- BUTTON - HEADER - SEARCH - 9099 -->

        <include>Hidden_Button_Search</include>

        <!-- BUTTON - AUTO SLIDE - HOME MENU -->

        <include condition="$EXP[Has_Home_Menu_Auto_Slide_Out_Animation]">skinshortcuts-template-Button_id_2011_Slide_Out_Home_Menu</include>

        <!-- HORIZONTAL -->

        <include condition="$EXP[Home_Is_Horizontal]">Home_Horizontal_Menu_Widgets</include>

        <!-- VERTICAL -->

        <include condition="$EXP[Home_Is_Vertical]">Home_Vertical_Menu_Widgets</include>

        <!-- SHOWN LABEL MENU / SUBMENU - ONLY ICON -->

        <include condition="$EXP[Exp_Show_Label_Item_Menu]">Furniture_Home_Menu_Icon_Label_Tip</include>

        <!-- TRAILER FULL SCREEN -->

        <include>Def_Dialog_Info_Video_Fullscreen</include>

        <!-- DEBUG INFO -->

        <include condition="Skin.HasSetting(DebugInfo.widget)">Furniture_DebugInfo_Item</include>
    </controls>
</window>
